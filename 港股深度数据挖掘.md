
# 港股深度数据挖掘

[TOC]

## 输出

### xml

券商追踪栏目由xml输出，输出的目录结构如下：

```
other
    --- afterlastfiveholdstock.xml
stockcode
    --- E0001.xml
    --- E0002.xml
    --- ...
stockcode_trader
    +++ E0001
        --- E00001_巴西证券有限公司.xml
        --- E00001_JPMORGAN CHASE BANK, NATIONAL ASSOCIATION.xml
        --- ...
    +++ E0002
        --- E00002_ABN AMRO CLEARING HONG KONG LTD.xml
        --- E00002_包大卫证券投资有限公司.xml
        --- ...
    +++ ...
trader
    --- 安鑫天玛.xml
    --- SMBC.xml
    --- ...
```

#### stock

- 命名规则：证券代码
- 保存持有该证券的最新券商列表

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<body>
    <row>
        <pd>20140403</pd><!-- 数据日期 -->
        <sn>永隆证券</sn><!-- 券商名称 -->
        <hs>3715328</hs><!-- 券商持股数量 降序排序 -->
        <ip>0.160</ip><!-- 券商持股比例 -->
        <dq>-56000</dq><!-- 日变化数量 -->
        <dp>0.000</dp><!-- 日变化比例 -->
        <wq>-52000</wq><!-- 周变化数量 -->
        <wp>0.000</wp><!-- 周变化比例 -->
        <mq>-126210</mq><!-- 月变化数量 -->
        <mp>0.000</mp><!-- 月变化比例 -->
    </row>
    ...
</body>
```

#### trader

- 命名规则：券商名称
- 保存该券商最新持有的证券列表

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<body>
    <row>
        <pd>20140403</pd>
        <sc>E00003</sc><!-- 证券代码 -->
        <hs>520000</hs><!-- 降序排序 -->
        <ip>0.000</ip>
        <dq>0</dq>
        <dp>0.000</dp>
        <wq>0</wq>
        <wp>0.000</wp>
        <mq>0</mq>
        <mp>0.000</mp>
    </row>
    ...
</body>
```

#### stockcode_trader

- 按照证券代码建立目录
- 每个子目录下面的文件命名规则：证券代码_券商名称
- 保存该券商持有该证券的历史记录

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<body>
    <row>
        <pd>20160229</pd><!-- 降序排序 -->
        <hs>39552</hs>
        <ip>0.000</ip>
        <dq>0</dq>
        <dp>0.000</dp>
        <wq>0</wq>
        <wp>0.000</wp>
        <mq>-2000</mq>
        <mp>0.000</mp>
    </row>
    ...
</body>
```

#### other

- 仅保存一个文件
- 该文件保存最近5天以内，日变化率>=2% 或 周变化率>=4% 或 月变化率>=10% 的全部记录
- **不得超过500条记录**，超过后需要删除日期距现在久远的，证券代码更大的记录

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<body>
    <row>
        <st>中银国际</st><!-- 券商名称 -->
        <sc>E00001</sc><!-- 升序排序 -->
        <pd>20151014</pd><!-- 降序排序 -->
        <hs>10944056</hs>
        <ip>0.280</ip>
        <dq>597444</dq>
        <dp>0.020</dp>
        <wq>426816</wq>
        <wp>0.010</wp>
        <mq>514850</mq>
        <mp>0.010</mp>
    </row>
    ...
</body>
```
